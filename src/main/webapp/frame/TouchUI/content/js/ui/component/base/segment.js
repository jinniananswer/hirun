/*!
 * segment component
 * http://www.wadecn.com/
 * auth:xiedx@asiainfo.com
 * Copyright 2015, WADE
 */
!function(e,n,t){"use strict";if(e&&"undefined"==typeof e.Segment){var a=function(n,a){var s=this;s.el=n&&1==n.nodeType?n:t.getElementById(n),s.el&&s.el.nodeType&&(s.id=e.attr(s.el,"id"))&&(a&&e.isObject(a)&&e.extend(s,a),e.attr(s.el,"x-wade-uicomponent")||e.attr(s.el,"x-wade-uicomponent","segment"),s._init(),s.constructor.call(s))};a.prototype=e.extend(new e.UIComponent,{val:function(n){var t=this;if(void 0==n)return t.value;var a,s,i=!1;e(t.span).children("span").each(function(){if(a=e.attr(this,"val"),s=e.attr(this,"idx"),a==n&&e.isNumeric(s)&&s!=t.selectedIndex)return i=!0,s=parseInt(s),t.selectedIndex>-1&&e("span:nth-child("+(t.selectedIndex+1)+")",t.span).attr("className",""),this.className="e_segmentOn",t.selectedIndex=s,t.value=t.el.value=a,!1}),""==n&&!i&&t.selectedIndex>-1&&(e("span:nth-child("+(t.selectedIndex+1)+")",t.span).attr("className",""),t.selectedIndex=-1,t.value=t.el.value=n),a=s=null},append:function(n,t){var a=this;if((e.isNumeric(n)||e.isString(n))&&(e.isNumeric(t)||e.isString(t))){n=e.xss(n,!0),t=e.xss(t,!0);var s=a.span.getElementsByTagName("span"),i=s?s.length:0;s=null,e(a.el).before('<span idx="'+i+'" val="'+t+'">'+n+"</span>")}},getDisabled:function(){var e=this;return e.disabled},setDisabled:function(n){var t=this;t.disabled=!!n;var a=t.span.className?t.span.className:"";t.disabled?(" "+a+" ").indexOf(" e_dis ")<0&&(t.span.className=e.trim(a+" e_dis")):(a=e.trim((" "+a+" ").replace(/ e_dis /gi," ")),t.span.className=a)},destroy:function(){var e=this;e.span=null,e.el=null},_init:function(){var n=this;n.span=e(n.el).parent("span.e_segment:first")[0],n.value=n.el.value;var t=e.attr(n.span,"id");t||(t=n.id+"_span",e.attr(n.span,"id",t)),e.attr(n.el,"x-visible-element",t),n.disabled&&n.setDisabled(!0),e(n.span).tap(function(t){if(!n.disabled){t.originalEvent&&(t=e.event.fix(t.originalEvent));var a,s,i=t.target;if(i&&1==i.nodeType&&e.nodeName(i,"span")){if(a=e.attr(i,"val"),s=e.attr(i,"idx"),!e.isNumeric(s))return;if(s==n.selectedIndex)return;s=parseInt(s),n.selectedIndex>-1&&e("span:nth-child("+(n.selectedIndex+1)+")",n.span).attr("className",""),i.className="e_segmentOn",n.selectedIndex=s,n.value=n.el.value=a,e.event.trigger({type:"change",originalEvent:t.originalEvent},null,n.el)}}})}}),n.Segment=e.Segment=a}}(window.Wade,window,document);