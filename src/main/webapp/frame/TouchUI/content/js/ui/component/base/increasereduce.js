/*!
 * increasereduce component
 * http://www.wadecn.com/
 * auth:xiedx@asiainfo.com
 * Copyright 2015, WADE
 */
!function(e,i,a){"use strict";if(e&&"undefined"==typeof e.IncreaseReduce){var n=a.createElement("input"),t="oninput"in n;n=null;var l=function(i,n){var t=this;t.el=i&&1==i.nodeType?i:a.getElementById(i),t.el&&t.el.nodeType&&(t.id=e.attr(t.el,"id"))&&(n&&e.isObject(n)&&e.extend(t,n),e.attr(t.el,"x-wade-uicomponent")||e.attr(t.el,"x-wade-uicomponent","increasereduce"),t._init(),t.constructor.call(t))};l.prototype=e.extend(new e.UIComponent,{val:function(i){var a=this;return e.isNumeric(i)?(i=parseInt(i),void(void 0!=a.min&&i<a.min||void 0!=a.max&&i>a.max||(a.value=i,a.el.value=i))):void 0!=typeof a.value&&null!=a.value?""+a.value:""},getDisabled:function(){var e=this;return e.disabled},setDisabled:function(i){var a=this;a.disabled=!!i;var n=a.div.className?a.div.className:"";a.disabled?((" "+n+" ").indexOf(" e_dis ")<0&&(a.div.className=e.trim(n+" e_dis")),a.el.disabled=!0):(n=e.trim((" "+n+" ").replace(/ e_dis /gi," ")),a.div.className=n,a.el.disabled=!1)},destroy:function(){var e=this;e.div=null,e.btnReduce=null,e.btnIncrease=null,e.el=null},_init:function(){var i=this;i.div=e(i.el).parent("div.e_mix:first")[0],i.btnReduce=e(i.div).children("span.e_ico-reduce:first")[0],i.btnIncrease=e(i.div).children("span.e_ico-add:first")[0],/^[0-9]+/gi.test(i.el.value)?i.el.value=i.value=parseInt(i.el.value):i.el.value=i.value=0,i.disabled&&i.setDisabled(!0),e(i.btnReduce).tap(function(){if(i.disabled)return!1;var a;if(e.isNumber(i.value)&&i.value>0){if(a=i.value-i.step,void 0!=i.min&&a<i.min)return;i.value=a}void 0!=a&&(i.el.value=a)}),e(i.btnIncrease).tap(function(){if(i.disabled)return!1;var a;if(e.isNumber(i.value)&&i.value>-1){if(a=i.value+i.step,void 0!=i.max&&a>i.max)return;i.value=a}void 0!=a&&(i.el.value=a)}),t?e(i.el).bind("input",function(e){var a;if(this.value=(""+this.value).replace(/[^0-9]+/gi,""),""!=this.value){if(a=parseInt(this.value),void 0!=i.min&&a<i.min||void 0!=i.max&&a>i.max)return void(this.value=i.value);this.value=a}void 0!=a&&(i.value=a)}):(e(i.el).bind("keydown",function(e){return!i.disabled&&(!(e.shiftKey||e.altKey||e.ctrlKey)&&(e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106||8==e.keyCode||46==e.keyCode))}),e(i.el).bind("keyup",function(e){if(i.disabled)return!1;var a;if(""!=this.value){if(a=parseInt(this.value),void 0!=i.min&&a<i.min||void 0!=i.max&&a>i.max)return void(this.value=i.value);this.value=a}void 0!=a&&(i.value=a)}))}}),i.IncreaseReduce=e.IncreaseReduce=l}}(window.Wade,window,document);